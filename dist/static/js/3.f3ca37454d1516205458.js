webpackJsonp([3],{Gu7T:function(e,t,i){"use strict";t.__esModule=!0;var s,o=i("c/Tr"),a=(s=o)&&s.__esModule?s:{default:s};t.default=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return(0,a.default)(e)}},XsMW:function(e,t){},lwtJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Gu7T"),o=i.n(s),a=i("lHA8"),r=i.n(a),l=i("mvHQ"),n=i.n(l),c=i("P9l9"),d=i("MS2J"),u={name:"roleManager",data:function(){return{dialogVisible:!1,formData:{name:"",code:"",desc:"",moduleIdList:[],modulePermission:[],editAble:!0},selectNowMenu:{},roleList:[],data:[],defaultProps:{children:"children",label:"name",value:"id"},checkedKeys:[],middleModule:[],middlePermission:[]}},methods:{checkChange:function(){this.middlePermission=JSON.parse(n()(this.$refs.tree.getCheckedKeys()));var e=new r.a;Object(d.c)(this.middlePermission)||this.middlePermission.forEach(function(t){e.add(t.toString().substring(0,24))}),this.middleModule=[],this.middleModule=[].concat(o()(e)),this.middleModule.length>3&&this.middleModule.push("5d429e79bb9fe01c646d1fd6")},edit:function(){var e=this;Object(c.o)(this.formData).then(function(t){200===t.code?(e.$message.success("修改成功"),e.formData={name:"",code:"",desc:"",moduleIdList:[],modulePermission:[],editAble:!0},e.getAllRole()):2===t.code?(e.$store.commit("signInDialogVisibleTrue"),e.$router.push({path:"/meetingPage",query:{isError:!0}})):e.$message.error(t.msg)})},addRole:function(){var e=this;Object(c.d)(this.formData).then(function(t){200===t.code?(e.$message.success("新增成功"),e.formData={name:"",code:"",desc:"",moduleIdList:[],modulePermission:[],editAble:!0},e.getAllRole()):2===t.code?(e.$store.commit("signInDialogVisibleTrue"),e.$router.push({path:"/meetingPage",query:{isError:!0}})):e.$message.error(t.msg)})},setCheckedKey:function(){Object(d.c)(this.selectNowMenu)||this.$refs.tree.setCheckedKeys(this.checkedKeys)},menuClick:function(e){this.formData=JSON.parse(n()(e)),this.selectNowMenu=this.formData,this.checkedKeys=[].concat(o()(this.formData.modulePermission))},savePermission:function(){this.formData.moduleIdList=this.middleModule,this.formData.modulePermission=this.middlePermission,this.dialogVisible=!1},getAllRole:function(){var e=this;Object(c.r)("").then(function(t){200===t.code?d.c(t.data)||(e.roleList=t.data):2===t.code?(e.$store.commit("signInDialogVisibleTrue"),e.$router.push({path:"/meetingPage",query:{isError:!0}})):e.$message.error(t.msg)})}},mounted:function(){var e=this;this.getAllRole(),Object(c.u)("").then(function(t){200===t.code?d.c(t.data)||(e.data=t.data):2===t.code?(e.$store.commit("signInDialogVisibleTrue"),e.$router.push({path:"/meetingPage",query:{isError:!0}})):e.$message.error(t.msg)})}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"role-main"},[i("div",{staticClass:"role-left"},[i("el-row",{staticClass:"tac",staticStyle:{width:"100%",height:"100%"}},[i("el-col",{attrs:{span:24}},[i("el-menu",{attrs:{"default-active":"1"}},e._l(e.roleList,function(t,s){return i("el-menu-item",{attrs:{disabled:!t.editAble,index:s+""},on:{click:function(i){return e.menuClick(t)}}},[i("i",{staticClass:"el-icon-menu"}),e._v("`\n              "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])}),1)],1)],1)],1),e._v(" "),i("div",{staticClass:"role-right"},[i("el-form",{staticStyle:{width:"70%"},attrs:{model:e.formData,"label-width":"6.25rem","label-position":"left"}},[i("el-form-item",{attrs:{label:"角色名",prop:"name"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入角色名"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色编码",prop:"code"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入角色编码"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色备注",prop:"desc"}},[i("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",placeholder:"请输入备注"},model:{value:e.formData.desc,callback:function(t){e.$set(e.formData,"desc",t)},expression:"formData.desc"}})],1)],1),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("修改权限")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("修改")]),e._v(" "),i("el-button",{attrs:{type:"danger"}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{type:"success"},on:{click:e.addRole}},[e._v("新增")])],1),e._v(" "),i("el-dialog",{attrs:{title:"修改角色权限",visible:e.dialogVisible,center:"",width:"31%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},opened:e.setCheckedKey}},[i("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","node-key":"id","default-checked-keys":[5],props:e.defaultProps},on:{"check-change":e.checkChange}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer",center:"true"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.savePermission}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var f=i("VU/8")(u,m,!1,function(e){i("XsMW")},"data-v-6667d06f",null);t.default=f.exports}});